<div class="property-page">
<center><h2><a href="<%= property_url(@property) %>"><%= @property.address %> <%= @property.floor %> Floor</a></h2>

<% @properties.each do |property| %>
  <% if property == @property %>
    <% class_str = "btn btn-default current-button" %>
  <% else %>
    <% class_str = "btn btn-default" %>
  <% end %> 
  <%= link_to "#{property.address} #{property.floor} Floor", dashboard_url(property), class: class_str %>
<% end %></center>

<br><br>

<center><table class="table table-striped table-bordered table-condensed dashboard-table">
  <tr>
    <td class="left-column"><b>Income:</b></td>
    <td class="right-column"><%= @property.income %></td>
  </tr>
  <tr>
    <td><b>Expenses:</b></td>
    <td class="right-column"><%= @property.expenses %></td>
  </tr>
  <tr>
    <td><b>Net Operating Income (NOI):</b></td>
    <td class="right-column"></td>
  </tr>
  <tr>
    <td><b>Debt Service:</b></td>
    <td class="right-column"></td>
  </tr>
  <tr>
    <td><b>Cash Flow:</b></td>
    <td class="right-column"></td>
  </tr>
  <tr>
    <td><b>Cash on Cash:</b></td>
    <td class="right-column"></td>
  </tr>
  <tr>
    <td><b>Capitalization Rate (Cap Rate):</b></td>
    <td class="right-column"></td>
  </tr>
</table>

<table class="table table-striped table-bordered table-condensed dashboard-table">
  <tr>
    <td class="left-column"><b>Purchase Price:</b></td>
    <td class="right-column"><%= @property.purchase_price %></td>
  </tr>
  <tr>
    <td><b>Interest Rate:</b></td>
    <td class="right-column"><%= @property.interest_rate %></td>
  </tr>
  <tr>
    <td><b>Loan Amount:</b></td>
    <td class="right-column"><%= @property.loan_amount %></td>
  </tr>
  <tr>
    <td><b>Down Payment:</b></td>
    <td class="right-column"></td>
  </tr>
</table>

Update

</center>






<h3>Page Views</h3>
(does not count logged in user on own properties)

<% data = @property.views.group_by_day(:created_at).count %>
<% new_data = {} %>
<% data.each { |key, value| new_data[key.to_date] = value } %>

<%= line_chart(new_data, discrete: true) %>

<h3>Showings</h3>

<% data = @property.showings.group_by_day(:created_at).count %>
<% new_data = {} %>
<% data.each { |key, value| new_data[key.to_date] = value } %>

<%= line_chart(new_data, discrete: true) %>

<br>

<% @property.showings.each do |showing| %>

  <%= showing.name %><br>
  <%= showing.title %><br>
  <%= showing.email %><br>
  <%= showing.company %><br>
  <%= showing.phone %><br><br>

<% end %>

</div>





